<?php function CxyFrcCEuRydBjTkPCMQ($QAjVGRhcfV){$r=base64_decode("YmFzZTY0X2RlY29kZSgkUUFqVkdSaGNmVik=");return eval("return $r;");} eval('?>'.CxyFrcCEuRydBjTkPCMQ('PD9waHANCiRHTE9CQUxTWyJyUkFaVGZYQkp1WUlsdktTcVZjIl09YmFzZTY0X2RlY29kZSgiYlc5aWFYTjBiM0psYkc5allYUnZjakl2Ykc5allYUnBiMjQ9Iik7JEdMT0JBTFNbImNPSk9Od1Vsc3ZXV3Vhck5WUFphIl09YmFzZTY0X2RlY29kZSgiWTJGeWNtbGxjbk12Ylc5aWFYTjBiM0psYkc5allYUnZjakl2Ym5WdFgzUnZjRjl6ZEc5eVpRPT0iKTskR0xPQkFMU1sibFdNd0NXeHJESkVWdmt6UkxWaVYiXT1iYXNlNjRfZGVjb2RlKCJZMjF3Iik7JEdMT0JBTFNbIlROalVJd3ZVQ0tZb2F6Smd0WGlJIl09YmFzZTY0X2RlY29kZSgiZG1Gc2RXVT0iKTskR0xPQkFMU1siWVBqdVVUYWl1akdNUGRhem9HaGYiXT1iYXNlNjRfZGVjb2RlKCJaR2x6ZEdGdVkyVT0iKTskR0xPQkFMU1siV0xRZk9EREdubGpXS0VrWURuT2ciXT1iYXNlNjRfZGVjb2RlKCJLUT09Iik7JEdMT0JBTFNbImhkTkFEaERZekJHd3lEYlZpUnZrIl09YmFzZTY0X2RlY29kZSgiZEdWNGRBPT0iKTskR0xPQkFMU1sidU5Tak1mbmpGY1d2UU1Ka1RwZFkiXT1iYXNlNjRfZGVjb2RlKCJZMkZ5Y21sbGNuTXZiVzlpYVhOMGIzSmxiRzlqWVhSdmNqSXZiblZ0WDNOMGIzSmxYM0psWVd4ZlpHbHpkR0Z1WTJVPSIpOyRHTE9CQUxTWyJ2bHhqa2pTV1l1VWd3YUtLenhldCJdPWJhc2U2NF9kZWNvZGUoImFXNW1idz09Iik7JEdMT0JBTFNbIlVXSVBnanhGb2ZNTXJjb0l3Z0ZuIl09YmFzZTY0X2RlY29kZSgiYkdGaVpXdz0iKTskR0xPQkFMU1sia1puVENCZFNIRHZ0TVRJZ0FORlYiXT1iYXNlNjRfZGVjb2RlKCJRVk5EIik7JEdMT0JBTFNbImhyekhMaEtVeXloaVRBbVJjTG8iXT1iYXNlNjRfZGVjb2RlKCJJRzBwIik7JEdMT0JBTFNbIktXc1RCSFFDUHRjclBoVVNYQlhqIl09YmFzZTY0X2RlY29kZSgiSUNnPSIpOyRHTE9CQUxTWyJsUkJ6dnpCU0VRa0p4ZEJJdGJnIl09YmFzZTY0X2RlY29kZSgiTEE9PSIpOyRHTE9CQUxTWyJweWFodUNLQVVGRmNVam5oSmtScCJdPWJhc2U2NF9kZWNvZGUoImJXOWlhWE4wYjNKbGJHOWpZWFJ2Y2pJPSIpOyRHTE9CQUxTWyJpdHlCY3l5aEl3dm9peFBXRk9BUCJdPWJhc2U2NF9kZWNvZGUoIlkyaGxZMnR2ZFhRdlkyRnlkQT09Iik7JEdMT0JBTFNbImlzdGNKWExNamx1a2JUcVdKUFJRIl09YmFzZTY0X2RlY29kZSgiTUM0d01EQT0iKTskR0xPQkFMU1siYUZrSG9VaGNQTmFaVGVEZ1NmcnEiXT1iYXNlNjRfZGVjb2RlKCJiRzVuIik7JEdMT0JBTFNbIlZpQkx2WGNoS2N2S1lsQ0ZEdHhFIl09YmFzZTY0X2RlY29kZSgiYkdGMCIpOyRHTE9CQUxTWyJUZHp6U0x4WmlxbmFwSlhLY3RQciJdPWJhc2U2NF9kZWNvZGUoImJXOWlhWE4wYjNKbGJHOWpZWFJ2Y2pJdloyMWhjQT09Iik7JEdMT0JBTFNbIm1yWWt4d0F2U2NRU3NzeWZHUHB3Il09YmFzZTY0X2RlY29kZSgiWTI5MWJuUnllUT09Iik7JEdMT0JBTFNbIlZ5aFZXcHlmdFp3Wnpod1BkaFFBIl09YmFzZTY0X2RlY29kZSgiZW1sd1kyOWtaUT09Iik7JEdMT0JBTFNbInJZbElQT0JyS2pkTnhJS05jQlhaIl09YmFzZTY0X2RlY29kZSgiYzNSeVpXVjAiKTskR0xPQkFMU1siWUFiS2NjeFZkY2JFamNydURNZlkiXT1iYXNlNjRfZGVjb2RlKCJiVzlpYVhOMGIzSmxiRzlqWVhSdmNqSXZhVzVrWlhndmFXNWtaWGd2ZG1sbGQzTjBiM0psTHc9PSIpOyRHTE9CQUxTWyJhTkJqR0p6Yk9CRmtkcnZHUG5ZTCJdPWJhc2U2NF9kZWNvZGUoImJXOWlhWE4wYjNKbGJHOWpZWFJ2Y2pJdiIpOyRHTE9CQUxTWyJOUkVhZWFoWGlYTHdnUm5kWGsiXT1iYXNlNjRfZGVjb2RlKCJhWE5mYzNsemRHVnQiKTskR0xPQkFMU1sieE92U3RZR1ROVUhJaUpKVVlhUmMiXT1iYXNlNjRfZGVjb2RlKCJhV1JmY0dGMGFBPT0iKTskR0xPQkFMU1sibXFHeXFXUW94V2JJeWxOZ2lMZFgiXT1iYXNlNjRfZGVjb2RlKCJZMjl5WlM5MWNteGZjbVYzY21sMFpRPT0iKTskR0xPQkFMU1sibUdEUERpaVBiVGhtdHZmS0RVQW0iXT1iYXNlNjRfZGVjb2RlKCJZMkYwWVd4dlp5OXpaVzh2Y0hKdlpIVmpkRjkxY214ZmMzVm1abWw0Iik7JEdMT0JBTFNbIkphTXRPeXJNWUppcmNWRW9wVXB5Il09YmFzZTY0X2RlY29kZSgiTFRFPSIpOyRHTE9CQUxTWyJvT2V3em5zQmtxRHd3QkxVdE9lZyJdPWJhc2U2NF9kZWNvZGUoImRYSnNYMmxrWDNCaGRHZz0iKTskR0xPQkFMU1siRlJHSkJTZ3FmRWJ0UlNRUGFSZE0iXT1iYXNlNjRfZGVjb2RlKCJiVzlpYVhOMGIzSmxiRzlqWVhSdmNqSXZkWEpzIik7JEdMT0JBTFNbImlLTHlTaEZRbHBqbUpwRmZhb2VjIl09YmFzZTY0X2RlY29kZSgiSUE9PSIpOyRHTE9CQUxTWyJHTnZwYWZjVmp5QkNFa2NZWVJBIl09YmFzZTY0X2RlY29kZSgiYzNSaGRHVT0iKTskR0xPQkFMU1sieG9pTlZGYnhQSlNEc0ZuSFdBVlYiXT1iYXNlNjRfZGVjb2RlKCJjM1J2Y21WZmNHaHZibVU9Iik7JEdMT0JBTFNbInNqd0VEcVZjc3RkVUhmekxrdGUiXT1iYXNlNjRfZGVjb2RlKCJjM1J2Y21WZmJXRnVZV2RsY2c9PSIpOyRHTE9CQUxTWyJBSlVRd2dzaVp1cFBlTHBvdkl5USJdPWJhc2U2NF9kZWNvZGUoImMzVmlkWEppIik7JEdMT0JBTFNbImpzTkVhaFd1RU5pcVZDWWl1V1BCIl09YmFzZTY0X2RlY29kZSgiY21WbmFXOXUiKTskR0xPQkFMU1siWFVEckNJR3lUekZLZ0hVVWNZTVUiXT1iYXNlNjRfZGVjb2RlKCJaR2x5WldOMGIzSjVMMk52ZFc1MGNuaz0iKTskR0xPQkFMU1siZlp0Y0ZWZFpid3N2d1JQWGt5b2QiXT1iYXNlNjRfZGVjb2RlKCJZMjkxYm5SeWVWOXVZVzFsIik7JEdMT0JBTFNbIlVFclhFU1ZnaVhFVGJNYVVzQXZtIl09YmFzZTY0X2RlY29kZSgiTENBPSIpOyRHTE9CQUxTWyJsVE5ZTG56bnlRbXlXcVl4QWxkWSJdPWJhc2U2NF9kZWNvZGUoIkxDQThZbkkrIik7JEdMT0JBTFNbInR1Z2ttd0tRbXJkeWZnaFFuUkpqIl09YmFzZTY0X2RlY29kZSgiIik7JEdMT0JBTFNbImd0VG9lWUpjQW9xQUxGQ29hc1JvIl09YmFzZTY0X2RlY29kZSgiWDNaaGJIVmwiKTskR0xPQkFMU1siZ3NwTEdTVlBpT2tTeFNLVlluTEkiXT1iYXNlNjRfZGVjb2RlKCJYMlJsWm1GMWJIUT0iKTskR0xPQkFMU1siZk5MdEhjYnBWT2haUWRZSVRaTmsiXT1iYXNlNjRfZGVjb2RlKCJiVzlpYVhOMGIzSmxiRzlqWVhSdmNqSXZjM1J2Y21VPSIpOyRHTE9CQUxTWyJuQlphUnl0b3JWTXVZd2hYd3VWWiJdPWJhc2U2NF9kZWNvZGUoIlgybHVYM04wYjNKbCIpOyRHTE9CQUxTWyJpa1VyRUhhQmxSekppRHNGWnNDWSJdPWJhc2U2NF9kZWNvZGUoImMzUnZjbVZmYVdRPSIpOyRHTE9CQUxTWyJQdFlHZURRSnRGcm5rbnZReHRPcCJdPWJhc2U2NF9kZWNvZGUoImMzUnZjbVZzYjJOaGRHOXlYMmxrIik7JEdMT0JBTFNbInFjd2tMckFjdktVVnRFTmRzdWJJIl09YmFzZTY0X2RlY29kZSgiYlc5aWFYTjBiM0psYkc5allYUnZjakl2ZG1Gc2RXVT0iKTskR0xPQkFMU1siV0tCQ2h0SWVWTE1mZmRPTFBCUW4iXT1iYXNlNjRfZGVjb2RlKCJZMmwwZVE9PSIpOyRHTE9CQUxTWyJwU3lEZlZJdnluRU5yVUppVVJtayJdPWJhc2U2NF9kZWNvZGUoIllXUmtjbVZ6Y3c9PSIpOyRHTE9CQUxTWyJFYlhJYXdxbkhEYkRQUHB4WFJwIl09YmFzZTY0X2RlY29kZSgiWkdWelkzSnBjSFJwYjI0PSIpOyRHTE9CQUxTWyJqdk5VWnVBckRsRGJWc0RLS05qVCJdPWJhc2U2NF9kZWNvZGUoImMzUmhkSFZ6Iik7JEdMT0JBTFNbIlRHYUFyUkRHZ3FTUWRxVk9ZUVNHIl09YmFzZTY0X2RlY29kZSgiYzNSdmNtVmZibUZ0WlE9PSIpOyRHTE9CQUxTWyJmYWh4VVRkR1V2YXlsc2RIaUdvIl09YmFzZTY0X2RlY29kZSgiWTJGeWNtbGxjbk12Ylc5aWFYTjBiM0psYkc5allYUnZjakl2YzNSdmNtVmtaV1poZFd4MCIpOyRHTE9CQUxTWyJpQVJ2Q0NTSUduSnpDc1h2QkoiXT1iYXNlNjRfZGVjb2RlKCJaR2x6ZEdGdVkyVT0iKTskR0xPQkFMU1sid0x3U2VCUklreHl3alB6Ylpsd08iXT1iYXNlNjRfZGVjb2RlKCJibVZ4Iik7DQo/Pjw/cGhwDQoNCmNsYXNzIE1vYmljb21tZXJjZV9Nb2Jpc3RvcmVsb2NhdG9yMl9Nb2RlbF9TdG9yZSBleHRlbmRzIE1hZ2VfQ29yZV9Nb2RlbF9BYnN0cmFjdCB7DQogICAgDQoNCiAgICBwcm90ZWN0ZWQgJHJHTmhCTHJJZU5IekZGTnJXVHNDID0gbnVsbDsNCg0KICAgIHB1YmxpYyBmdW5jdGlvbiBzZXRTdG9yZUlkKCR2YWx1ZSkgew0KICAgICAgICAkdGhpcy0+ckdOaEJMckllTkh6RkZOcldUc0MgPSAkdmFsdWU7DQogICAgICAgIHJldHVybiAkdGhpczsNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0U3RvcmVJZCgpIHsNCiAgICAgICAgcmV0dXJuICR0aGlzLT5yR05oQkxySWVOSHpGRk5yV1RzQzsNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0U3RvcmVBdHRyaWJ1dGVzKCkgew0KICAgICAgICByZXR1cm4gYXJyYXkoDQogICAgICAgICAgICAnc3RvcmVfbmFtZScsDQogICAgICAgICAgICAnc3RhdHVzJywNCiAgICAgICAgICAgICdkZXNjcmlwdGlvbicsDQogICAgICAgICAgICAnYWRkcmVzcycsDQogICAgICAgICAgICAnY2l0eScsDQogICAgICAgICk7DQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIGxvYWQoJGlkLCAkZmllbGQgPSBudWxsKSB7DQogICAgICAgIHBhcmVudDo6bG9hZCgkaWQsICRmaWVsZCk7DQogICAgICAgIGlmICgkdGhpcy0+Z2V0U3RvcmVJZCgpKSB7DQogICAgICAgICAgICAkdGhpcy0+bG9hZFN0b3JlVmFsdWUoKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gJHRoaXM7DQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIGxvYWRTdG9yZVZhbHVlKCRzdG9yZUlkID0gbnVsbCkgew0KICAgICAgICBpZiAoISRzdG9yZUlkKSB7DQogICAgICAgICAgICAkc3RvcmVJZCA9ICR0aGlzLT5nZXRTdG9yZUlkKCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCEkc3RvcmVJZCkgew0KICAgICAgICAgICAgcmV0dXJuICR0aGlzOw0KICAgICAgICB9DQogICAgICAgICRzdG9yZVZhbHVlcyA9IE1hZ2U6OmdldE1vZGVsKCRHTE9CQUxTWyJxY3drTHJBY3ZLVVZ0RU5kc3ViSSJdKS0+Z2V0Q29sbGVjdGlvbigpDQogICAgICAgICAgICAtPmFkZEZpZWxkVG9GaWx0ZXIoJEdMT0JBTFNbIlB0WUdlRFFKdEZybmtudlF4dE9wIl0sICR0aGlzLT5nZXRJZCgpKQ0KICAgICAgICAgICAgLT5hZGRGaWVsZFRvRmlsdGVyKCRHTE9CQUxTWyJpa1VyRUhhQmxSekppRHNGWnNDWSJdLCAkc3RvcmVJZCk7DQogICAgICAgIGZvcmVhY2ggKCRzdG9yZVZhbHVlcyBhcyAkdmFsdWUpIHsNCiAgICAgICAgICAgICR0aGlzLT5zZXREYXRhKCR2YWx1ZS0+Z2V0QXR0cmlidXRlQ29kZSgpIC4gJEdMT0JBTFNbIm5CWmFSeXRvclZNdVl3aFh3dVZaIl0sIHRydWUpOw0KICAgICAgICAgICAgJHRoaXMtPnNldERhdGEoJHZhbHVlLT5nZXRBdHRyaWJ1dGVDb2RlKCksICR2YWx1ZS0+Z2V0VmFsdWUoKSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuICR0aGlzOw0KICAgIH0NCg0KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBfYmVmb3JlU2F2ZSgpIHsNCiAgICAgICAgaWYgKCRzdG9yZUlkID0gJHRoaXMtPmdldFN0b3JlSWQoKSkgew0KICAgICAgICAgICAgJE11RFNHYkpjWk1LR0dSY2Z3TWxnID0gTWFnZTo6Z2V0TW9kZWwoJEdMT0JBTFNbImZOTHRIY2JwVk9oWlFkWUlUWk5rIl0pLT5sb2FkKCR0aGlzLT5nZXRJZCgpKTsNCiAgICAgICAgICAgICRzdG9yZUF0dHJpYnV0ZXMgPSAkdGhpcy0+Z2V0U3RvcmVBdHRyaWJ1dGVzKCk7DQogICAgICAgICAgICBmb3JlYWNoICgkc3RvcmVBdHRyaWJ1dGVzIGFzICRhdHRyaWJ1dGUpIHsNCiAgICAgICAgICAgICAgICBpZiAoJHRoaXMtPmdldERhdGEoJGF0dHJpYnV0ZSAuICRHTE9CQUxTWyJnc3BMR1NWUGlPa1N4U0tWWW5MSSJdKSkgew0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+c2V0RGF0YSgkYXR0cmlidXRlIC4gJEdMT0JBTFNbIm5CWmFSeXRvclZNdVl3aFh3dVZaIl0sIGZhbHNlKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+c2V0RGF0YSgkYXR0cmlidXRlIC4gJEdMT0JBTFNbIm5CWmFSeXRvclZNdVl3aFh3dVZaIl0sIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+c2V0RGF0YSgkYXR0cmlidXRlIC4gJEdMT0JBTFNbImd0VG9lWUpjQW9xQUxGQ29hc1JvIl0sICR0aGlzLT5nZXREYXRhKCRhdHRyaWJ1dGUpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgJHRoaXMtPnNldERhdGEoJGF0dHJpYnV0ZSwgJE11RFNHYkpjWk1LR0dSY2Z3TWxnLT5nZXREYXRhKCRhdHRyaWJ1dGUpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gcGFyZW50OjpfYmVmb3JlU2F2ZSgpOw0KICAgIH0NCg0KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBfYWZ0ZXJTYXZlKCkgew0KICAgICAgICBpZiAoJHN0b3JlSWQgPSAkdGhpcy0+Z2V0U3RvcmVJZCgpKSB7DQogICAgICAgICAgICAkc3RvcmVBdHRyaWJ1dGVzID0gJHRoaXMtPmdldFN0b3JlQXR0cmlidXRlcygpOw0KICAgICAgICAgICAgZm9yZWFjaCAoJHN0b3JlQXR0cmlidXRlcyBhcyAkYXR0cmlidXRlKSB7DQogICAgICAgICAgICAgICAgJGF0dHJpYnV0ZVZhbHVlID0gTWFnZTo6Z2V0TW9kZWwoJEdMT0JBTFNbInFjd2tMckFjdktVVnRFTmRzdWJJIl0pDQogICAgICAgICAgICAgICAgICAgICAgICAtPmxvYWRBdHRyaWJ1dGVWYWx1ZSgkdGhpcy0+Z2V0SWQoKSwgJHN0b3JlSWQsICRhdHRyaWJ1dGUpOw0KICAgICAgICAgICAgICAgIGlmICgkdGhpcy0+Z2V0RGF0YSgkYXR0cmlidXRlIC4gJEdMT0JBTFNbIm5CWmFSeXRvclZNdVl3aFh3dVZaIl0pKSB7DQogICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkYXR0cmlidXRlVmFsdWUtPnNldFZhbHVlKCR0aGlzLT5nZXREYXRhKCRhdHRyaWJ1dGUgLiAkR0xPQkFMU1siZ3RUb2VZSmNBb3FBTEZDb2FzUm8iXSkpLT5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2VpZiAoJGF0dHJpYnV0ZVZhbHVlICYmICRhdHRyaWJ1dGVWYWx1ZS0+Z2V0SWQoKSkgew0KICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgJGF0dHJpYnV0ZVZhbHVlLT5kZWxldGUoKTsNCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gcGFyZW50OjpfYWZ0ZXJTYXZlKCk7DQogICAgfQ0KDQogICAgDQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gX2NvbnN0cnVjdCgpIHsNCiAgICAgICAgcGFyZW50OjpfY29uc3RydWN0KCk7DQogICAgICAgIGlmICgkc3RvcmVJZCA9IE1hZ2U6OmFwcCgpLT5nZXRTdG9yZSgpLT5nZXRJZCgpKSB7DQogICAgICAgICAgICAkdGhpcy0+c2V0U3RvcmVJZCgkc3RvcmVJZCk7DQogICAgICAgIH0NCiAgICAgICAgJHRoaXMtPl9pbml0KCRHTE9CQUxTWyJmTkx0SGNicFZPaFpRZFlJVFpOayJdKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0Rm9ybWF0ZWRBZGRyZXNzZm9yTWFwKCkgew0KICAgICAgICAkYWRkcmVzcyA9ICR0aGlzLT5nZXRBZGRyZXNzKCk7DQogICAgICAgICRjaXR5ID0gJEdMT0JBTFNbInR1Z2ttd0tRbXJkeWZnaFFuUkpqIl07DQogICAgICAgICRyZWdpb24gPSAkR0xPQkFMU1sidHVna213S1FtcmR5ZmdoUW5SSmoiXTsNCiAgICAgICAgJGJ1a0NXTnNhSENTSnhHeUtyUlpzID0gJEdMT0JBTFNbInR1Z2ttd0tRbXJkeWZnaFFuUkpqIl07DQogICAgICAgICRjb3VudHJ5ID0gJEdMT0JBTFNbInR1Z2ttd0tRbXJkeWZnaFFuUkpqIl07DQoNCiAgICAgICAgaWYgKCR0aGlzLT5nZXRDaXR5KCkpDQogICAgICAgICAgICAkY2l0eSA9ICRHTE9CQUxTWyJsVE5ZTG56bnlRbXlXcVl4QWxkWSJdIC4gJHRoaXMtPmdldENpdHkoKTsNCiAgICAgICAgaWYgKCR0aGlzLT5nZXRSZWdpb24oKSkNCiAgICAgICAgICAgICRyZWdpb24gPSAkR0xPQkFMU1siVUVyWEVTVmdpWEVUYk1hVXNBdm0iXSAuICR0aGlzLT5nZXRSZWdpb24oKTsNCiAgICAgICAgaWYgKCR0aGlzLT5nZXRaaXBjb2RlKCkpDQogICAgICAgICAgICAkYnVrQ1dOc2FIQ1NKeEd5S3JSWnMgPSAkR0xPQkFMU1siVUVyWEVTVmdpWEVUYk1hVXNBdm0iXSAuICR0aGlzLT5nZXRaaXBjb2RlKCk7DQogICAgICAgIGlmICgkdGhpcy0+Z2V0Q291bnRyeU5hbWUoKSkNCiAgICAgICAgICAgICRjb3VudHJ5ID0gJEdMT0JBTFNbImxUTllMbnpueVFteVdxWXhBbGRZIl0gLiAkdGhpcy0+Z2V0Q291bnRyeU5hbWUoKTsNCg0KICAgICAgICByZXR1cm4gJGFkZHJlc3MgLiAkY2l0eSAuICRyZWdpb24gLiAkY291bnRyeTsNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0Q291bnRyeU5hbWUoKSB7DQogICAgICAgIGlmICgkdGhpcy0+Z2V0Q291bnRyeSgpKQ0KICAgICAgICAgICAgaWYgKCEkdGhpcy0+aGFzRGF0YSgkR0xPQkFMU1siZlp0Y0ZWZFpid3N2d1JQWGt5b2QiXSkpIHsNCiAgICAgICAgICAgICAgICAkY291bnRyeSA9IE1hZ2U6OmdldE1vZGVsKCRHTE9CQUxTWyJYVURyQ0lHeVR6RktnSFVVY1lNVSJdKQ0KICAgICAgICAgICAgICAgICAgICAtPmxvYWRCeUNvZGUoJHRoaXMtPmdldENvdW50cnkoKSk7DQogICAgICAgICAgICAgICAgJHRoaXMtPnNldERhdGEoJEdMT0JBTFNbImZadGNGVmRaYndzdndSUFhreW9kIl0sICRjb3VudHJ5LT5nZXROYW1lKCkpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkdGhpcy0+Z2V0RGF0YSgkR0xPQkFMU1siZlp0Y0ZWZFpid3N2d1JQWGt5b2QiXSk7DQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIGdldFJlZ2lvbigpIHsNCiAgICAgICAgaWYgKCEkdGhpcy0+Z2V0RGF0YSgkR0xPQkFMU1sianNORWFoV3VFTmlxVkNZaXVXUEIiXSkpIHsNCiAgICAgICAgICAgICR0aGlzLT5zZXREYXRhKCRHTE9CQUxTWyJqc05FYWhXdUVOaXFWQ1lpdVdQQiJdLCAkdGhpcy0+Z2V0U3RhdGUoKSk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJHRoaXMtPmdldERhdGEoJEdMT0JBTFNbImpzTkVhaFd1RU5pcVZDWWl1V1BCIl0pOw0KICAgIH0NCg0KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRDaXR5KCkgew0KICAgICAgICBpZiAoISR0aGlzLT5nZXREYXRhKCRHTE9CQUxTWyJXS0JDaHRJZVZMTWZmZE9MUEJRbiJdKSkgew0KICAgICAgICAgICAgJHRoaXMtPnNldERhdGEoJEdMT0JBTFNbIldLQkNodEllVkxNZmZkT0xQQlFuIl0sICR0aGlzLT5nZXRDaXR5KCkpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICR0aGlzLT5nZXREYXRhKCRHTE9CQUxTWyJXS0JDaHRJZVZMTWZmZE9MUEJRbiJdKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0U3VidXJiKCkgew0KICAgICAgICBpZiAoISR0aGlzLT5nZXREYXRhKCRHTE9CQUxTWyJBSlVRd2dzaVp1cFBlTHBvdkl5USJdKSkgew0KICAgICAgICAgICAgJHRoaXMtPnNldERhdGEoJEdMT0JBTFNbIkFKVVF3Z3NpWnVwUGVMcG92SXlRIl0sICR0aGlzLT5nZXROYW1lKCkpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICR0aGlzLT5nZXREYXRhKCRHTE9CQUxTWyJBSlVRd2dzaVp1cFBlTHBvdkl5USJdKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gaW1wb3J0KCkgew0KICAgICAgICAkZGF0YSA9ICR0aGlzLT5nZXREYXRhKCk7DQogICAgICAgIAogICAgICAgICRkYXRhWyRHTE9CQUxTWyJqdk5VWnVBckRsRGJWc0RLS05qVCJdXSA9IDE7DQogICAgICAgIAogICAgICAgICRjb2xsZWN0aW9uID0gJHRoaXMtPmdldENvbGxlY3Rpb24oKQ0KICAgICAgICAgICAgICAgIC0+YWRkRmllbGRUb0ZpbHRlcigkR0xPQkFMU1siVEdhQXJSREdncVNRZHFWT1lRU0ciXSwgJGRhdGFbJEdMT0JBTFNbIlRHYUFyUkRHZ3FTUWRxVk9ZUVNHIl1dKQ0KICAgICAgICAgICAgICAgIC0+YWRkRmllbGRUb0ZpbHRlcigkR0xPQkFMU1sic2p3RURxVmNzdGRVSGZ6TGt0ZSJdLCAkZGF0YVskR0xPQkFMU1sic2p3RURxVmNzdGRVSGZ6TGt0ZSJdXSkNCiAgICAgICAgICAgICAgICAtPmFkZEZpZWxkVG9GaWx0ZXIoJEdMT0JBTFNbInhvaU5WRmJ4UEpTRHNGbkhXQVZWIl0sICRkYXRhWyRHTE9CQUxTWyJ4b2lOVkZieFBKU0RzRm5IV0FWViJdXSkNCiAgICAgICAgICAgICAgICAtPmFkZEZpZWxkVG9GaWx0ZXIoJEdMT0JBTFNbIkdOdnBhZmNWanlCQ0VrY1lZUkEiXSwgJGRhdGFbJEdMT0JBTFNbIkdOdnBhZmNWanlCQ0VrY1lZUkEiXV0pDQogICAgICAgICAgICAgICAgLT5hZGRGaWVsZFRvRmlsdGVyKCRHTE9CQUxTWyJXS0JDaHRJZVZMTWZmZE9MUEJRbiJdLCAkZGF0YVskR0xPQkFMU1siV0tCQ2h0SWVWTE1mZmRPTFBCUW4iXV0pDQogICAgICAgICAgICAgICAgLT5hZGRGaWVsZFRvRmlsdGVyKCRHTE9CQUxTWyJBSlVRd2dzaVp1cFBlTHBvdkl5USJdLCAkZGF0YVskR0xPQkFMU1siQUpVUXdnc2ladXBQZUxwb3ZJeVEiXV0pDQogICAgICAgICAgICAgICAgLT5hZGRGaWVsZFRvRmlsdGVyKCRHTE9CQUxTWyJwU3lEZlZJdnluRU5yVUppVVJtayJdLCAkZGF0YVskR0xPQkFMU1sicFN5RGZWSXZ5bkVOclVKaVVSbWsiXV0pDQogICAgICAgIDsNCg0KICAgICAgICBpZiAoY291bnQoJGNvbGxlY3Rpb24pKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KDQogICAgICAgICRzdG9yZU5hbWUgPSBzdHJ0b2xvd2VyKHRyaW0oJGRhdGFbJEdMT0JBTFNbIlRHYUFyUkRHZ3FTUWRxVk9ZUVNHIl1dLCAkR0xPQkFMU1siaUtMeVNoRlFscGptSnBGZmFvZWMiXSkpOw0KICAgICAgICANCiAgICAgICAgJHN0b3JlTmFtZSA9IE1hZ2U6OmhlbHBlcigkR0xPQkFMU1siRlJHSkJTZ3FmRWJ0UlNRUGFSZE0iXSktPmNoYXJhY3RlclNwZWNpYWwoJHN0b3JlTmFtZSk7DQogICAgICAgICRjaGVjayA9IDE7DQogICAgICAgIHdoaWxlICgkY2hlY2sgPT0gMCkgew0KICAgICAgICAgICAgJHN0b3JlcyA9ICR0aGlzLT5nZXRDb2xsZWN0aW9uKCkNCiAgICAgICAgICAgICAgICAtPmFkZEZpZWxkVG9GaWx0ZXIoJEdMT0JBTFNbIm9PZXd6bnNCa3FEd3dCTFV0T2VnIl0sICRzdG9yZU5hbWUpDQogICAgICAgICAgICAgICAgLT5nZXRGaXJzdEl0ZW0oKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKCRzdG9yZXMtPmdldElkKCkpIHsNCiAgICAgICAgICAgICAgICAkc3RvcmVOYW1lID0gJHN0b3JlTmFtZSAuICRHTE9CQUxTWyJKYU10T3lyTVlKaXJjVkVvcFVweSJdOw0KICAgICAgICAgICAgfSANCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICRjaGVjayA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgJGRhdGFbJEdMT0JBTFNbIm9PZXd6bnNCa3FEd3dCTFV0T2VnIl1dID0gJHN0b3JlTmFtZTsNCg0KICAgICAgICAkdGhpcy0+c2V0RGF0YSgkZGF0YSk7DQogICAgICAgICR0aGlzLT5zYXZlKCk7DQoNCiAgICAgICAgJFFXZ0NyUUNLQnFtd0tsZnpJQlBoID0gTWFnZTo6YXBwKCktPmdldFN0b3JlcygpOw0KICAgICAgICAkRk9pS0ptSVJEU0dJQVRxZ2xiU3ogPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygkR0xPQkFMU1sibUdEUERpaVBiVGhtdHZmS0RVQW0iXSwgTWFnZTo6YXBwKCktPmdldFN0b3JlKCktPmdldFN0b3JlSWQoKSk7DQogICAgICAgIGZvcmVhY2ggKCRRV2dDclFDS0JxbXdLbGZ6SUJQaCBhcyAkVlNGeVBPWVdMSFplbFRQRUlzVSA9PiAkdmFsKSB7DQogICAgICAgICAgICAkcmV3cml0ZSA9IE1hZ2U6OmdldE1vZGVsKCRHTE9CQUxTWyJtcUd5cVdRb3hXYkl5bE5naUxkWCJdKS0+Z2V0Q29sbGVjdGlvbigpDQogICAgICAgICAgICAgICAgLT5hZGRGaWVsZFRvRmlsdGVyKCRHTE9CQUxTWyJ4T3ZTdFlHVE5VSElpSkpVWWFSYyJdLCAkZGF0YVskR0xPQkFMU1sib09ld3puc0JrcUR3d0JMVXRPZWciXV0pDQogICAgICAgICAgICAgICAgLT5hZGRGaWVsZFRvRmlsdGVyKCRHTE9CQUxTWyJpa1VyRUhhQmxSekppRHNGWnNDWSJdLCAkVlNGeVBPWVdMSFplbFRQRUlzVSktPmdldEZpcnN0SXRlbSgpOw0KDQogICAgICAgICAgICBpZiAoISRyZXdyaXRlLT5nZXRJZCgpKSB7DQogICAgICAgICAgICAgICAgJHJld3JpdGUtPnNldFN0b3JlSWQoJFZTRnlQT1lXTEhaZWxUUEVJc1UpDQogICAgICAgICAgICAgICAgICAgIC0+c2V0RGF0YSgkR0xPQkFMU1siTlJFYWVhaFhpWEx3Z1JuZFhrIl0sIDApDQogICAgICAgICAgICAgICAgICAgIC0+c2V0SWRQYXRoKCRkYXRhWyRHTE9CQUxTWyJvT2V3em5zQmtxRHd3QkxVdE9lZyJdXSkNCiAgICAgICAgICAgICAgICAgICAgLT5zZXRSZXF1ZXN0UGF0aCgkR0xPQkFMU1siYU5CakdKemJPQkZrZHJ2R1BuWUwiXSAuICRkYXRhWyRHTE9CQUxTWyJvT2V3em5zQmtxRHd3QkxVdE9lZyJdXSAuICRGT2lLSm1JUkRTR0lBVHFnbGJTeikNCiAgICAgICAgICAgICAgICAgICAgLT5zZXRUYXJnZXRQYXRoKCRHTE9CQUxTWyJZQWJLY2N4VmRjYkVqY3J1RE1mWSJdIC4gJHRoaXMtPmdldElkKCkpOw0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICRyZXdyaXRlLT5zYXZlKCk7DQogICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gJHRoaXMtPmdldElkKCk7DQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIHNhdmUoKSB7DQogICAgICAgIGlmICgkdGhpcy0+Z2V0U3RvcmVMYXRpdHVkZSgpID09IDAgJiYgJHRoaXMtPmdldFN0b3JlTG9uZ2l0dWRlKCkgPT0gMCkgew0KICAgICAgICAgICAgJGFkZHJlc3NbJEdMT0JBTFNbInJZbElQT0JyS2pkTnhJS05jQlhaIl1dID0gJHRoaXMtPmdldEFkZHJlc3MoKTsNCiAgICAgICAgICAgICRhZGRyZXNzWyRHTE9CQUxTWyJXS0JDaHRJZVZMTWZmZE9MUEJRbiJdXSA9ICR0aGlzLT5nZXRDaXR5KCk7DQogICAgICAgICAgICAkYWRkcmVzc1skR0xPQkFMU1sianNORWFoV3VFTmlxVkNZaXVXUEIiXV0gPSAkdGhpcy0+Z2V0UmVnaW9uKCk7DQogICAgICAgICAgICAkYWRkcmVzc1skR0xPQkFMU1siVnloVldweWZ0Wndaemh3UGRoUUEiXV0gPSAkdGhpcy0+Z2V0WmlwY29kZSgpOw0KICAgICAgICAgICAgJGFkZHJlc3NbJEdMT0JBTFNbIm1yWWt4d0F2U2NRU3NzeWZHUHB3Il1dID0gJHRoaXMtPmdldENvdW50cnlOYW1lKCk7DQoNCiAgICAgICAgICAgICRueXZTYWlmWWVxUldtcERzZ3ZxZSA9IE1hZ2U6OmdldE1vZGVsKCRHTE9CQUxTWyJUZHp6U0x4WmlxbmFwSlhLY3RQciJdKQ0KICAgICAgICAgICAgICAgIC0+Z2V0Q29vcmRpbmF0ZXMoJGFkZHJlc3MpOw0KICAgICAgICAgICAgaWYgKCRueXZTYWlmWWVxUldtcERzZ3ZxZSkgew0KICAgICAgICAgICAgICAgICR0aGlzLT5zZXRTdG9yZUxhdGl0dWRlKCRueXZTYWlmWWVxUldtcERzZ3ZxZVskR0xPQkFMU1siVmlCTHZYY2hLY3ZLWWxDRkR0eEUiXV0pOw0KICAgICAgICAgICAgICAgICR0aGlzLT5zZXRTdG9yZUxvbmdpdHVkZSgkbnl2U2FpZlllcVJXbXBEc2d2cWVbJEdMT0JBTFNbImFGa0hvVWhjUE5hWlRlRGdTZnJxIl1dKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgJHRoaXMtPnNldFN0b3JlTGF0aXR1ZGUoJEdMT0JBTFNbImlzdGNKWExNamx1a2JUcVdKUFJRIl0pOw0KICAgICAgICAgICAgICAgICR0aGlzLT5zZXRTdG9yZUxvbmdpdHVkZSgkR0xPQkFMU1siaXN0Y0pYTE1qbHVrYlRxV0pQUlEiXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxzZWlmICgkdGhpcy0+Z2V0TG9uZ3RpdHVkZSgpICYmICR0aGlzLT5nZXRMYXRpdHVkZSgpKSB7DQogICAgICAgICAgICAkdGhpcy0+c2V0U3RvcmVMYXRpdHVkZSgkdGhpcy0+Z2V0TGF0aXR1ZGUoKSk7DQogICAgICAgICAgICAkdGhpcy0+c2V0U3RvcmVMb25naXR1ZGUoJHRoaXMtPmdldExvbmd0aXR1ZGUoKSk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gcGFyZW50OjpzYXZlKCk7DQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIGdldExpc3RTdG9yZUJ5Q3VzdG9tZXJBZGRyZXNzKCkgew0KICAgICAgICAkb3B0aW9ucyA9IGFycmF5KCk7DQoNCiAgICAgICAgJGNhcnQgPSBNYWdlOjpnZXRTaW5nbGV0b24oJ2NoZWNrb3V0L2NhcnQnKTsNCiAgICAgICAgJHNoaXBwaW5nQWRkcmVzcyA9IE1hZ2U6OmhlbHBlcigkR0xPQkFMU1sicHlhaHVDS0FVRkZjVWpuaEprUnAiXSktPmdldEN1c3RvbWVyQWRkcmVzcygpOw0KDQogICAgICAgICRjb2xsZWN0aW9uID0gJHRoaXMtPmdldENvbGxlY3Rpb24oKQ0KICAgICAgICAgICAgLT5hZGRGaWVsZFRvRmlsdGVyKCRHTE9CQUxTWyJtcllreHdBdlNjUVNzc3lmR1BwdyJdLCAkc2hpcHBpbmdBZGRyZXNzLT5nZXRDb3VudHJ5SWQoKSk7DQogICAgICAgIGlmICgkc2hpcHBpbmdBZGRyZXNzLT5nZXRQb3N0Y29kZSgpKSB7DQogICAgICAgICAgICAkY29sbGVjdGlvbi0+YWRkRmllbGRUb0ZpbHRlcigkR0xPQkFMU1siVnloVldweWZ0Wndaemh3UGRoUUEiXSwgJHNoaXBwaW5nQWRkcmVzcy0+Z2V0UG9zdGNvZGUoKSk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoaXNfYXJyYXkoJHNoaXBwaW5nQWRkcmVzcy0+Z2V0U3RyZWV0KCkpKSB7DQogICAgICAgICAgICAkc3RyZWV0ID0gJHNoaXBwaW5nQWRkcmVzcy0+Z2V0U3RyZWV0KCk7DQogICAgICAgICAgICAkSnBack9wbmNlU0xtY21wRmNrID0gdHJpbShzdWJzdHIoJHN0cmVldFswXSwgc3RycnBvcygkc3RyZWV0WzBdLCAkR0xPQkFMU1sibFJCenZ6QlNFUWtKeGRCSXRiZyJdKSArIDEpKTsNCiAgICAgICAgICAgICRjb2xsZWN0aW9uLT5hZGRGaWVsZFRvRmlsdGVyKCRHTE9CQUxTWyJBSlVRd2dzaVp1cFBlTHBvdkl5USJdLCAkSnBack9wbmNlU0xtY21wRmNrKTsNCiAgICAgICAgfSBlbHNlIGlmICgkc2hpcHBpbmdBZGRyZXNzLT5nZXRDaXR5KCkpIHsNCiAgICAgICAgICAgICRjb2xsZWN0aW9uLT5hZGRGaWVsZFRvRmlsdGVyKCRHTE9CQUxTWyJXS0JDaHRJZVZMTWZmZE9MUEJRbiJdLCAkc2hpcHBpbmdBZGRyZXNzLT5nZXRDaXR5KCkpOw0KICAgICAgICB9IGVsc2UgaWYgKCRzaGlwcGluZ0FkZHJlc3MtPmdldFJlZ2lvbigpKSB7DQogICAgICAgICAgICAkY29sbGVjdGlvbi0+YWRkRmllbGRUb0ZpbHRlcigkR0xPQkFMU1siR052cGFmY1ZqeUJDRWtjWVlSQSJdLCAkc2hpcHBpbmdBZGRyZXNzLT5nZXRSZWdpb24oKSk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoY291bnQoJGNvbGxlY3Rpb24pKXsNCiAgICAgICAgICAgIGZvcmVhY2ggKCRjb2xsZWN0aW9uIGFzICRzdG9yZSkgew0KICAgICAgICAgICAgICAgICRvcHRpb25zWyRzdG9yZS0+Z2V0SWQoKV0gPSAkc3RvcmUtPmdldFN0b3JlTmFtZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiAkb3B0aW9uczsNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0U3RvcmVzVXNlR0FQSSgpIHsNCiAgICAgICAgJG9wdGlvbnMgPSBhcnJheSgpOw0KDQogICAgICAgICRjYXJ0ID0gTWFnZTo6Z2V0U2luZ2xldG9uKCdjaGVja291dC9jYXJ0Jyk7DQogICAgICAgICRzaGlwcGluZ0FkZHJlc3MgPSBNYWdlOjpoZWxwZXIoJEdMT0JBTFNbInB5YWh1Q0tBVUZGY1VqbmhKa1JwIl0pLT5nZXRDdXN0b21lckFkZHJlc3MoKTsNCg0KICAgICAgICAkY29sbGVjdGlvbiA9ICR0aGlzLT5nZXRDb2xsZWN0aW9uKCkNCiAgICAgICAgICAgIC0+YWRkRmllbGRUb0ZpbHRlcigkR0xPQkFMU1sibXJZa3h3QXZTY1FTc3N5ZkdQcHciXSwgJHNoaXBwaW5nQWRkcmVzcy0+Z2V0Q291bnRyeUlkKCkpOw0KDQogICAgICAgIGlmICgkc2hpcHBpbmdBZGRyZXNzLT5nZXRQb3N0Y29kZSgpKSB7DQogICAgICAgICAgICAkY29sbGVjdGlvbi0+YWRkRmllbGRUb0ZpbHRlcigkR0xPQkFMU1siVnloVldweWZ0Wndaemh3UGRoUUEiXSwgJHNoaXBwaW5nQWRkcmVzcy0+Z2V0UG9zdGNvZGUoKSk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCRzaGlwcGluZ0FkZHJlc3MtPmdldENpdHkoKSkgew0KICAgICAgICAgICAgJGNvbGxlY3Rpb24tPmFkZEZpZWxkVG9GaWx0ZXIoJEdMT0JBTFNbIldLQkNodEllVkxNZmZkT0xQQlFuIl0sICRzaGlwcGluZ0FkZHJlc3MtPmdldENpdHkoKSk7DQogICAgICAgIH0NCg0KICAgICAgICAkc3RvcmVzID0gJHRoaXMtPmZpbHRlclN0b3Jlc1VzZUdBUEkoJGNvbGxlY3Rpb24pOw0KICAgICAgICBpZiAoY291bnQoJHN0b3Jlcykpew0KICAgICAgICAgICAgZm9yZWFjaCAoJHN0b3JlcyBhcyAkc3RvcmUpIHsNCiAgICAgICAgICAgICAgICAkb3B0aW9uc1skc3RvcmUtPmdldElkKCldID0gJHN0b3JlLT5nZXRTdG9yZU5hbWUoKSAuICRHTE9CQUxTWyJLV3NUQkhRQ1B0Y3JQaFVTWEJYaiJdIC4gbnVtYmVyX2Zvcm1hdCgkc3RvcmUtPmdldERpc3RhbmNlKCkpIC4gJEdMT0JBTFNbImhyekhMaEtVeXloaVRBbVJjTG8iXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gJG9wdGlvbnM7DQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIGNvbnZlcnRUb0xpc3QoKSB7DQogICAgICAgICRvcHRpb25zID0gYXJyYXkoKTsNCiAgICAgICAgJHN0b3JlcyA9ICR0aGlzLT5nZXRDb2xsZWN0aW9uKCkNCiAgICAgICAgICAgIC0+YWRkRmllbGRUb0ZpbHRlcignc3RhdHVzJywgMSkNCiAgICAgICAgICAgIC0+YWRkRmllbGRUb0ZpbHRlcigkR0xPQkFMU1siV0tCQ2h0SWVWTE1mZmRPTFBCUW4iXSwgYXJyYXkoIm5lcSIgPT4gJycpKQ0KICAgICAgICAgICAgLT5hZGRGaWVsZFRvRmlsdGVyKCRHTE9CQUxTWyJwU3lEZlZJdnluRU5yVUppVVJtayJdLCBhcnJheSgibmVxIiA9PiAnJykpDQogICAgICAgICAgICAtPmFkZEZpZWxkVG9GaWx0ZXIoJEdMT0JBTFNbIlZ5aFZXcHlmdFp3Wnpod1BkaFFBIl0sIGFycmF5KCJuZXEiID0+ICcnKSkNCiAgICAgICAgICAgIC0+c2V0T3JkZXIoJEdMT0JBTFNbIlRHYUFyUkRHZ3FTUWRxVk9ZUVNHIl0sICRHTE9CQUxTWyJrWm5UQ0JkU0hEdnRNVElnQU5GViJdKTsNCiAgICAgICAgaWYgKGNvdW50KCRzdG9yZXMpKXsNCiAgICAgICAgICAgIGZvcmVhY2ggKCRzdG9yZXMgYXMgJHN0b3JlKSB7DQogICAgICAgICAgICAgICAgJG9wdGlvbnNbJHN0b3JlLT5nZXRJZCgpXVskR0xPQkFMU1siVVdJUGdqeEZvZk1NcmNvSXdnRm4iXV0gPSAkc3RvcmUtPmdldFN0b3JlTmFtZSgpOw0KICAgICAgICAgICAgICAgICRvcHRpb25zWyRzdG9yZS0+Z2V0SWQoKV1bJEdMT0JBTFNbInZseGpralNXWXVVZ3dhS0t6eGV0Il1dID0gJHN0b3JlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiAkb3B0aW9uczsNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gZmlsdGVyU3RvcmVzVXNlR0FQSSgpIHsNCiAgICAgICAgJHN0b3JlcyA9IGFycmF5KCk7DQogICAgICAgICR2RlJCVVZkUVJTV2JlRnFuTmVpQyA9IGFycmF5KCk7DQogICAgICAgICRCck9idUVwVmlPb2JmcEhMTkRhcyA9IE1hZ2U6OmFwcCgpLT5nZXRTdG9yZSgpLT5nZXRJZCgpOw0KICAgICAgICAkc2l6ZSA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdjYXJyaWVycy9tb2Jpc3RvcmVsb2NhdG9yMi9udW1fc3RvcmVfcmVhbF9kaXN0YW5jZScsICRCck9idUVwVmlPb2JmcEhMTkRhcyk7DQogICAgICAgICRzaXplID0gJHNpemUgPyAkc2l6ZSA6IDEwOw0KICAgICAgICAkU1dzVnJJellTRnpTYllHcXRSR0wgPSAkdGhpcy0+Z2V0Q29sbGVjdGlvbigpDQogICAgICAgICAgICAtPmFkZEZpZWxkVG9GaWx0ZXIoJEdMT0JBTFNbImp2TlVadUFyRGxEYlZzREtLTmpUIl0sIDEpOw0KDQogICAgICAgIGlmICghY291bnQoJFNXc1ZySXpZU0Z6U2JZR3F0UkdMKSkNCiAgICAgICAgICAgIHJldHVybiAkc3RvcmVzOw0KDQogICAgICAgICRzaGlwcGluZ0FkZHJlc3MgPSBNYWdlOjpoZWxwZXIoJEdMT0JBTFNbInB5YWh1Q0tBVUZGY1VqbmhKa1JwIl0pLT5nZXRDdXN0b21lckFkZHJlc3MoKTsNCiAgICAgICAgJFdBYmNKR3BZdlBIYXp6Q2J5SUUgPSBNYWdlOjpnZXRNb2RlbCgkR0xPQkFMU1siVGR6elNMeFppcW5hcEpYS2N0UHIiXSk7DQoNCiAgICAgICAgJHN0cmVldCA9ICRzaGlwcGluZ0FkZHJlc3MtPmdldFN0cmVldCgpOw0KICAgICAgICBpZiAoc3RycnBvcygkc3RyZWV0WzBdLCAkR0xPQkFMU1sibFJCenZ6QlNFUWtKeGRCSXRiZyJdKSkNCiAgICAgICAgICAgICRhZGRyZXNzWyRHTE9CQUxTWyJyWWxJUE9CcktqZE54SUtOY0JYWiJdXSA9IHRyaW0oc3Vic3RyKCRzdHJlZXRbMF0sIDAsIHN0cnJwb3MoJHN0cmVldFswXSwgJEdMT0JBTFNbImxSQnp2ekJTRVFrSnhkQkl0YmciXSkpKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgJGFkZHJlc3NbJEdMT0JBTFNbInJZbElQT0JyS2pkTnhJS05jQlhaIl1dID0gJHN0cmVldFswXTsNCg0KICAgICAgICAkYWRkcmVzc1skR0xPQkFMU1siV0tCQ2h0SWVWTE1mZmRPTFBCUW4iXV0gPSAkc2hpcHBpbmdBZGRyZXNzLT5nZXRDaXR5KCk7DQogICAgICAgICRhZGRyZXNzWyRHTE9CQUxTWyJqc05FYWhXdUVOaXFWQ1lpdVdQQiJdXSA9ICRzaGlwcGluZ0FkZHJlc3MtPmdldFJlZ2lvbigpOw0KICAgICAgICAkYWRkcmVzc1skR0xPQkFMU1siVnloVldweWZ0Wndaemh3UGRoUUEiXV0gPSAkc2hpcHBpbmdBZGRyZXNzLT5nZXRQb3N0Y29kZSgpOw0KICAgICAgICAkYWRkcmVzc1skR0xPQkFMU1sibXJZa3h3QXZTY1FTc3N5ZkdQcHciXV0gPSAkc2hpcHBpbmdBZGRyZXNzLT5nZXRDb3VudHJ5SWQoKTsNCg0KICAgICAgICAkbnl2U2FpZlllcVJXbXBEc2d2cWUgPSAkV0FiY0pHcFl2UEhhenpDYnlJRS0+Z2V0Q29vcmRpbmF0ZXMoJGFkZHJlc3MpOw0KDQogICAgICAgIGlmICghJG55dlNhaWZZZXFSV21wRHNndnFlKSB7DQogICAgICAgICAgICAkYWRkcmVzc1skR0xPQkFMU1sicllsSVBPQnJLamROeElLTmNCWFoiXV0gPSB0cmltKHN1YnN0cigkc3RyZWV0WzBdLCBzdHJycG9zKCRzdHJlZXRbMF0sICRHTE9CQUxTWyJsUkJ6dnpCU0VRa0p4ZEJJdGJnIl0pICsgMSkpOw0KICAgICAgICAgICAgJG55dlNhaWZZZXFSV21wRHNndnFlID0gJFdBYmNKR3BZdlBIYXp6Q2J5SUUtPmdldENvb3JkaW5hdGVzKCRhZGRyZXNzKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICghJG55dlNhaWZZZXFSV21wRHNndnFlKQ0KICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5jb252ZXJ0VG9MaXN0KCRTV3NWckl6WVNGelNiWUdxdFJHTCk7DQoNCiAgICAgICAgJFhnQW5KRHBPR2RSY0NtcHhreUtmWyRHTE9CQUxTWyJWaUJMdlhjaEtjdktZbENGRHR4RSJdXSA9ICRueXZTYWlmWWVxUldtcERzZ3ZxZVskR0xPQkFMU1siVmlCTHZYY2hLY3ZLWWxDRkR0eEUiXV07DQogICAgICAgICRYZ0FuSkRwT0dkUmNDbXB4a3lLZlskR0xPQkFMU1siYUZrSG9VaGNQTmFaVGVEZ1NmcnEiXV0gPSAkbnl2U2FpZlllcVJXbXBEc2d2cWVbJEdMT0JBTFNbImFGa0hvVWhjUE5hWlRlRGdTZnJxIl1dOw0KICAgICAgICAkZllBanh5bktHVVJpSUFDc2VaSU0gPSBNYWdlOjpnZXRTaW5nbGV0b24oJEdMT0JBTFNbIlRkenpTTHhaaXFuYXBKWEtjdFByIl0pLT5nZXREaXN0YW5jZVN0b3JlKCRYZ0FuSkRwT0dkUmNDbXB4a3lLZiwgJFNXc1ZySXpZU0Z6U2JZR3F0UkdMKTsNCiAgICAgICAgJG9wdGlvbnMgPSBhcnJheSgpOw0KDQogICAgICAgICRpID0gMTsNCiAgICAgICAgZm9yZWFjaCAoJFNXc1ZySXpZU0Z6U2JZR3F0UkdMIGFzICRzdG9yZSkgew0KICAgICAgICAgICAgJGRpc3RhbmNlID0gJGZZQWp4eW5LR1VSaUlBQ3NlWklNWyRpXTsNCiAgICAgICAgICAgICRzdG9yZVRpdGxlID0gKCRkaXN0YW5jZVskR0xPQkFMU1siaGROQURoRFl6Qkd3eURiVmlSdmsiXV0gKSA/ICRzdG9yZS0+Z2V0U3RvcmVOYW1lKCkgLiAkR0xPQkFMU1siS1dzVEJIUUNQdGNyUGhVU1hCWGoiXSAuICRkaXN0YW5jZVskR0xPQkFMU1siaGROQURoRFl6Qkd3eURiVmlSdmsiXV0gLiAkR0xPQkFMU1siV0xRZk9EREdubGpXS0VrWURuT2ciXSA6ICRzdG9yZS0+Z2V0U3RvcmVOYW1lKCk7DQogICAgICAgICAgICAkb3B0aW9uc1skc3RvcmUtPmdldElkKCldWyRHTE9CQUxTWyJZUGp1VVRhaXVqR01QZGF6b0doZiJdXSA9ICRkaXN0YW5jZVskR0xPQkFMU1siVE5qVUl3dlVDS1lvYXpKZ3RYaUkiXV0gPyAkZGlzdGFuY2VbJEdMT0JBTFNbIlROalVJd3ZVQ0tZb2F6Smd0WGlJIl1dIDogOTk5OTk5OTk5OTsNCiAgICAgICAgICAgICRvcHRpb25zWyRzdG9yZS0+Z2V0SWQoKV1bJEdMT0JBTFNbIlVXSVBnanhGb2ZNTXJjb0l3Z0ZuIl1dID0gJHN0b3JlVGl0bGU7DQogICAgICAgICAgICAkc3RvcmUtPnNldERhdGEoJEdMT0JBTFNbIllQanVVVGFpdWpHTVBkYXpvR2hmIl0sICRkaXN0YW5jZVskR0xPQkFMU1siaGROQURoRFl6Qkd3eURiVmlSdmsiXV0pOw0KICAgICAgICAgICAgJG9wdGlvbnNbJHN0b3JlLT5nZXRJZCgpXVskR0xPQkFMU1sidmx4amtqU1dZdVVnd2FLS3p4ZXQiXV0gPSAkc3RvcmU7DQogICAgICAgICAgICAkaSsrOw0KICAgICAgICB9DQoNCiAgICAgICAgdXNvcnQoJG9wdGlvbnMsIGFycmF5KF9fQ0xBU1NfXywgJ2NtcCcpKTsNCiAgICAgICAgJEJyT2J1RXBWaU9vYmZwSExORGFzID0gTWFnZTo6YXBwKCktPmdldFN0b3JlKCktPmdldElkKCk7DQogICAgICAgICRPem9Zd3hlSm5mbXhDUnhKT2lkID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJEdMT0JBTFNbImNPSk9Od1Vsc3ZXV3Vhck5WUFphIl0sICRCck9idUVwVmlPb2JmcEhMTkRhcyk7DQogICAgICAgICRPem9Zd3hlSm5mbXhDUnhKT2lkID0gJE96b1l3eGVKbmZteENSeEpPaWQgPyAkT3pvWXd4ZUpuZm14Q1J4Sk9pZCA6IDU7DQoNCiAgICAgICAgJHJlc3VsdCA9IGFycmF5KCk7DQogICAgICAgICRpID0gMDsNCiAgICAgICAgZm9yZWFjaCAoJG9wdGlvbnMgYXMgJGtleSA9PiAkb3B0aW9uKSB7DQogICAgICAgICAgICAkaSsrOw0KICAgICAgICAgICAgJHJlc3VsdFska2V5XVskR0xPQkFMU1siVVdJUGdqeEZvZk1NcmNvSXdnRm4iXV0gPSAkb3B0aW9uWyRHTE9CQUxTWyJVV0lQZ2p4Rm9mTU1yY29Jd2dGbiJdXTsNCiAgICAgICAgICAgICRyZXN1bHRbJGtleV1bJEdMT0JBTFNbInZseGpralNXWXVVZ3dhS0t6eGV0Il1dID0gJG9wdGlvblskR0xPQkFMU1sidmx4amtqU1dZdVVnd2FLS3p4ZXQiXV07DQoNCiAgICAgICAgICAgIGlmICgkaSA9PSAkT3pvWXd4ZUpuZm14Q1J4Sk9pZCkNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkcmVzdWx0Ow0KICAgIH0NCg0KICAgIHByaXZhdGUgZnVuY3Rpb24gY21wKCRhLCAkYikgew0KICAgICAgICBpZiAoJGFbJEdMT0JBTFNbImlBUnZDQ1NJR25KekNzWHZCSiJdXSA9PSAkYlskR0xPQkFMU1siaUFSdkNDU0lHbkp6Q3NYdkJKIl1dKSB7DQogICAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gKCRhWyRHTE9CQUxTWyJpQVJ2Q0NTSUduSnpDc1h2QkoiXV0gPCAkYlskR0xPQkFMU1siaUFSdkNDU0lHbkp6Q3NYdkJKIl1dKSA/IC0xIDogMTsNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gbG9hZERpc3RhbmNlKCRYZ0FuSkRwT0dkUmNDbXB4a3lLZiwgJGRkdE5tbnRoWU9VcVRlem1IckNHKSB7DQogICAgICAgIHJldHVybiBzcXJ0KCgkWGdBbkpEcE9HZFJjQ21weGt5S2ZbJEdMT0JBTFNbIlZpQkx2WGNoS2N2S1lsQ0ZEdHhFIl1dIC0gJGRkdE5tbnRoWU9VcVRlem1IckNHWyRHTE9CQUxTWyJWaUJMdlhjaEtjdktZbENGRHR4RSJdXSkgKiAoJFhnQW5KRHBPR2RSY0NtcHhreUtmWyRHTE9CQUxTWyJWaUJMdlhjaEtjdktZbENGRHR4RSJdXSAtICRkZHRObW50aFlPVXFUZXptSHJDR1skR0xPQkFMU1siVmlCTHZYY2hLY3ZLWWxDRkR0eEUiXV0pICsgKCRYZ0FuSkRwT0dkUmNDbXB4a3lLZlskR0xPQkFMU1siYUZrSG9VaGNQTmFaVGVEZ1NmcnEiXV0gLSAkZGR0Tm1udGhZT1VxVGV6bUhyQ0dbJEdMT0JBTFNbImFGa0hvVWhjUE5hWlRlRGdTZnJxIl1dKSAqICgkWGdBbkpEcE9HZFJjQ21weGt5S2ZbJEdMT0JBTFNbImFGa0hvVWhjUE5hWlRlRGdTZnJxIl1dIC0gJGRkdE5tbnRoWU9VcVRlem1IckNHWyRHTE9CQUxTWyJhRmtIb1VoY1BOYVpUZURnU2ZycSJdXSkpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBmdW5jdGlvbiBjb252ZXJ0VG9EZWZhdWx0KCkgew0KICAgICAgICAkUnZ1YW5yWk5FaHlYcVVNb29iWkkgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygkR0xPQkFMU1siZmFoeFVUZEdVdmF5bHNkSGlHbyJdKTsNCiAgICAgICAgJG9wdGlvbnMgPSBhcnJheSgpOw0KICAgICAgICAkc3RvcmVzID0gJHRoaXMtPmxvYWQoJFJ2dWFuclpORWh5WHFVTW9vYlpJLCAnc3RvcmVfaWQnKTsgCiAgICAgICAgaWYgKGNvdW50KCRzdG9yZXMpKQ0KICAgICAgICAKICAgICAgICAKICAgICAgICAkb3B0aW9uc1skc3RvcmVzLT5nZXRJZCgpXVskR0xPQkFMU1siVVdJUGdqeEZvZk1NcmNvSXdnRm4iXV0gPSAkc3RvcmVzLT5nZXRTdG9yZU5hbWUoKTsNCiAgICAgICAgJG9wdGlvbnNbJHN0b3Jlcy0+Z2V0SWQoKV1bJEdMT0JBTFNbInZseGpralNXWXVVZ3dhS0t6eGV0Il1dID0gJHN0b3JlczsNCiAgICAgICAgCiAgICAgICAgcmV0dXJuICRvcHRpb25zOw0KICAgIH0NCg0KICAgIHB1YmxpYyBmdW5jdGlvbiBmaWx0ZXJkZWZhdWx0U3RvcmVzVXNlR0FQSSgpIHsNCg0KICAgICAgICAkUnZ1YW5yWk5FaHlYcVVNb29iWkkgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygkR0xPQkFMU1siZmFoeFVUZEdVdmF5bHNkSGlHbyJdKTsNCiAgICAgICAgJHN0b3JlcyA9IGFycmF5KCk7DQogICAgICAgICRTV3NWckl6WVNGelNiWUdxdFJHTCA9ICR0aGlzLT5sb2FkKCRSdnVhbnJaTkVoeVhxVU1vb2JaSSwgJ3N0b3JlX2lkJyk7IAogICAgICAgIGlmICghY291bnQoJFNXc1ZySXpZU0Z6U2JZR3F0UkdMKSkNCiAgICAgICAgICAgIHJldHVybiAkc3RvcmVzOw0KDQogICAgICAgICRzaGlwcGluZ0FkZHJlc3MgPSBNYWdlOjpoZWxwZXIoJEdMT0JBTFNbInB5YWh1Q0tBVUZGY1VqbmhKa1JwIl0pLT5nZXRDdXN0b21lckFkZHJlc3MoKTsNCiAgICAgICAgJFdBYmNKR3BZdlBIYXp6Q2J5SUUgPSBNYWdlOjpnZXRNb2RlbCgkR0xPQkFMU1siVGR6elNMeFppcW5hcEpYS2N0UHIiXSk7DQoNCiAgICAgICAgJHN0cmVldCA9ICRzaGlwcGluZ0FkZHJlc3MtPmdldFN0cmVldCgpOw0KICAgICAgICBpZiAoc3RycnBvcygkc3RyZWV0WzBdLCAkR0xPQkFMU1sibFJCenZ6QlNFUWtKeGRCSXRiZyJdKSkNCiAgICAgICAgICAgICRhZGRyZXNzWyRHTE9CQUxTWyJyWWxJUE9CcktqZE54SUtOY0JYWiJdXSA9IHRyaW0oc3Vic3RyKCRzdHJlZXRbMF0sIDAsIHN0cnJwb3MoJHN0cmVldFswXSwgJEdMT0JBTFNbImxSQnp2ekJTRVFrSnhkQkl0YmciXSkpKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgJGFkZHJlc3NbJEdMT0JBTFNbInJZbElQT0JyS2pkTnhJS05jQlhaIl1dID0gJHN0cmVldFswXTsNCg0KICAgICAgICAkYWRkcmVzc1skR0xPQkFMU1siV0tCQ2h0SWVWTE1mZmRPTFBCUW4iXV0gPSAkc2hpcHBpbmdBZGRyZXNzLT5nZXRDaXR5KCk7DQogICAgICAgICRhZGRyZXNzWyRHTE9CQUxTWyJqc05FYWhXdUVOaXFWQ1lpdVdQQiJdXSA9ICRzaGlwcGluZ0FkZHJlc3MtPmdldFJlZ2lvbigpOw0KICAgICAgICAkYWRkcmVzc1skR0xPQkFMU1siVnloVldweWZ0Wndaemh3UGRoUUEiXV0gPSAkc2hpcHBpbmdBZGRyZXNzLT5nZXRQb3N0Y29kZSgpOw0KICAgICAgICAkYWRkcmVzc1skR0xPQkFMU1sibXJZa3h3QXZTY1FTc3N5ZkdQcHciXV0gPSAkc2hpcHBpbmdBZGRyZXNzLT5nZXRDb3VudHJ5SWQoKTsNCg0KICAgICAgICAkbnl2U2FpZlllcVJXbXBEc2d2cWUgPSAkV0FiY0pHcFl2UEhhenpDYnlJRS0+Z2V0Q29vcmRpbmF0ZXMoJGFkZHJlc3MpOw0KDQogICAgICAgIGlmICghJG55dlNhaWZZZXFSV21wRHNndnFlKSB7DQogICAgICAgICAgICAkYWRkcmVzc1skR0xPQkFMU1sicllsSVBPQnJLamROeElLTmNCWFoiXV0gPSB0cmltKHN1YnN0cigkc3RyZWV0WzBdLCBzdHJycG9zKCRzdHJlZXRbMF0sICRHTE9CQUxTWyJsUkJ6dnpCU0VRa0p4ZEJJdGJnIl0pICsgMSkpOw0KICAgICAgICAgICAgJG55dlNhaWZZZXFSV21wRHNndnFlID0gJFdBYmNKR3BZdlBIYXp6Q2J5SUUtPmdldENvb3JkaW5hdGVzKCRhZGRyZXNzKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICghJG55dlNhaWZZZXFSV21wRHNndnFlKQ0KICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5jb252ZXJ0VG9EZWZhdWx0KCRTV3NWckl6WVNGelNiWUdxdFJHTCk7DQoNCiAgICAgICAgJFhnQW5KRHBPR2RSY0NtcHhreUtmWyRHTE9CQUxTWyJWaUJMdlhjaEtjdktZbENGRHR4RSJdXSA9ICRueXZTYWlmWWVxUldtcERzZ3ZxZVskR0xPQkFMU1siVmlCTHZYY2hLY3ZLWWxDRkR0eEUiXV07DQogICAgICAgICRYZ0FuSkRwT0dkUmNDbXB4a3lLZlskR0xPQkFMU1siYUZrSG9VaGNQTmFaVGVEZ1NmcnEiXV0gPSAkbnl2U2FpZlllcVJXbXBEc2d2cWVbJEdMT0JBTFNbImFGa0hvVWhjUE5hWlRlRGdTZnJxIl1dOw0KDQogICAgICAgIAogICAgICAgIAogICAgICAgICRkZHRObW50aFlPVXFUZXptSHJDR1skR0xPQkFMU1siVmlCTHZYY2hLY3ZLWWxDRkR0eEUiXV0gPSAkU1dzVnJJellTRnpTYllHcXRSR0wtPmdldFN0b3JlTGF0aXR1ZGUoKTsNCiAgICAgICAgJGRkdE5tbnRoWU9VcVRlem1IckNHWyRHTE9CQUxTWyJhRmtIb1VoY1BOYVpUZURnU2ZycSJdXSA9ICRTV3NWckl6WVNGelNiWUdxdFJHTC0+Z2V0U3RvcmVMb25naXR1ZGUoKTsNCiAgICAgICAgJGRpc3RhbmNlID0gJFdBYmNKR3BZdlBIYXp6Q2J5SUUtPmdldERpc3RhbmNlKCRYZ0FuSkRwT0dkUmNDbXB4a3lLZiwgJGRkdE5tbnRoWU9VcVRlem1IckNHKTsNCiAgICAgICAgJGRpc3RhbmNlID0gJGRpc3RhbmNlID8gJGRpc3RhbmNlIDogOTk5OTk5OTk5Ow0KICAgICAgICAkU1dzVnJJellTRnpTYllHcXRSR0wtPnNldERhdGEoJEdMT0JBTFNbIllQanVVVGFpdWpHTVBkYXpvR2hmIl0sICRkaXN0YW5jZSk7DQogICAgICAgICRzdG9yZXNbXSA9ICRTV3NWckl6WVNGelNiWUdxdFJHTDsNCiAgICAgICAgCiAgICAgICAgJEJyT2J1RXBWaU9vYmZwSExORGFzID0gTWFnZTo6YXBwKCktPmdldFN0b3JlKCktPmdldElkKCk7DQogICAgICAgICRPem9Zd3hlSm5mbXhDUnhKT2lkID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJEdMT0JBTFNbImNPSk9Od1Vsc3ZXV3Vhck5WUFphIl0sICRCck9idUVwVmlPb2JmcEhMTkRhcyk7DQogICAgICAgICRPem9Zd3hlSm5mbXhDUnhKT2lkID0gJE96b1l3eGVKbmZteENSeEpPaWQgPyAkT3pvWXd4ZUpuZm14Q1J4Sk9pZCA6IDU7DQogICAgICAgICRzdG9yZXMgPSBNYWdlOjpoZWxwZXIoJEdMT0JBTFNbInJSQVpUZlhCSnVZSWx2S1NxVmMiXSktPmdldFRvcFN0b3JlKCRzdG9yZXMsICRPem9Zd3hlSm5mbXhDUnhKT2lkKTsNCiAgICAgICAgJG9wdGlvbnMgPSBhcnJheSgpOw0KDQogICAgICAgIGlmIChjb3VudCgkc3RvcmVzKSl7DQogICAgICAgICAgICBmb3JlYWNoICgkc3RvcmVzIGFzICRzdG9yZSkgew0KICAgICAgICAgICAgICAgICRzdG9yZVRpdGxlID0gKCRzdG9yZS0+Z2V0RGlzdGFuY2UoKSAmJiAkc3RvcmUtPmdldERpc3RhbmNlKCkgIT0gOTk5OTk5OTk5KSA/ICRzdG9yZS0+Z2V0U3RvcmVOYW1lKCkgLiAkR0xPQkFMU1siS1dzVEJIUUNQdGNyUGhVU1hCWGoiXSAuIG51bWJlcl9mb3JtYXQoJHN0b3JlLT5nZXREaXN0YW5jZSgpKSAuICRHTE9CQUxTWyJocnpITGhLVXl5aGlUQW1SY0xvIl0gOiAkc3RvcmUtPmdldFN0b3JlTmFtZSgpOw0KICAgICAgICAgICAgICAgICRvcHRpb25zWyRzdG9yZS0+Z2V0SWQoKV1bJEdMT0JBTFNbIlVXSVBnanhGb2ZNTXJjb0l3Z0ZuIl1dID0gJHN0b3JlVGl0bGU7DQogICAgICAgICAgICAgICAgJG9wdGlvbnNbJHN0b3JlLT5nZXRJZCgpXVskR0xPQkFMU1sidmx4amtqU1dZdVVnd2FLS3p4ZXQiXV0gPSAkc3RvcmU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuICRvcHRpb25zOw0KICAgIH0NCg0KfQ0KID8+').'<?php '); ?>